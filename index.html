<!DOCTYPE html>
<!--
By obooklage 28-11-2020
-->
<html>
   <head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- <title>Zone de déplacement de 20km autorisée au 28/11/2020</title> -->
	<title>Zone de déplacement de 10km autorisée au 28/11/2020</title>
	<link rel="stylesheet" href="index.css">
	<link rel="stylesheet" href="leaflet.css" />
	<script src="leaflet.js"></script>
	 
   </head>
   
   <body>
	  <div id="map_id"></div>
      <script>
	
	var map = L.map('map_id').fitWorld();
	var mapLink = '<a href="https://openstreetmap.org">OpenStreetMap</a>';

	var icon_me = L.icon({
			iconUrl: 'images/me.png',
			iconSize: [42, 42]
		});

	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: '&copy; ' + mapLink + ' Programmé avec amour par ' + ' <a href="https://www.albertdemun.fr/" target="_blank">Albert de Mun - Nogent</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(map);

	function onLocationFound(e) {
		/* var radius = e.accuracy / 2; */
		var radius = 10000; /* 10 km */

		L.marker(e.latlng,{title: "Me",icon: icon_me}).addTo(map)
			.bindPopup("Zone de " + radius/1000 + " km").openPopup();

		L.circle(e.latlng, radius, {color: "green", opacity:1.0}).addTo(map);

		map.setZoom(12);
	}

	function onLocationError(e) {
		alert(e.message);
	}

	map.on('locationfound', onLocationFound);
	map.on('locationerror', onLocationError);

	map.locate({setView: true, maxZoom: 16});
			  
      </script>
   </body>
</html>
